<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="ClipCore.ClipCoreWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ClipCore"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="ClipCore">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <Grid>
        <Grid x:Name="AppTitleBar"
              Height="48"
              VerticalAlignment="Top"
              ColumnSpacing="8"
              Padding="8,0,8,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.3*" />
                <ColumnDefinition Width="1.5*" />
                <ColumnDefinition Width="1.3*" />
            </Grid.ColumnDefinitions>

            <Grid Margin="0,0,0,0" HorizontalAlignment="Left" Grid.Column="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Button x:Name="NavigationBtn" Grid.Column="0"
                        Visibility="Visible"
                        Content="&#xE700;"  FontFamily="Segoe Fluent Icons"
                        Width="36" Height="36"
                        HorizontalAlignment="Center"
                        Style="{StaticResource TransparentButtonStyle2}"
                        Background="Transparent" Click="NavigationBtn_Click">
                </Button>
                <Image x:Name="appIcon" Grid.Column="1" Visibility="Collapsed" Source="/Assets/Images/Logos/ClipCoreIcon32.ico" Width="32" Height="24" VerticalAlignment="Center" />
                <TextBlock Grid.Column="2" Text="ClipCore" VerticalAlignment="Center" FontWeight="SemiBold" Margin="3, -2, 0, 0"/>
            </Grid>

            <Grid Grid.Column="1" VerticalAlignment="Center">
                <Button x:Name="SearchIconBtn"
                        Visibility="Visible"
                        Content="&#xE721;"  FontFamily="Segoe Fluent Icons"
                        Width="36" Height="36"
                        HorizontalAlignment="Center"
                        Style="{StaticResource TransparentButtonStyle}"
                        Background="Transparent">
                    <Button.Flyout>
                        <Flyout Placement="Bottom" x:Name="SearchFlyout">
                            <Flyout.FlyoutPresenterStyle>
                                <Style TargetType="FlyoutPresenter">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Padding" Value="0"/>
                                    <Setter Property="CornerRadius" Value="0"/>
                                </Style>
                            </Flyout.FlyoutPresenterStyle>
                            <StackPanel Margin="0">
                                <AutoSuggestBox x:Name="FlyoutSearchBox"
                                QueryIcon="Find" Width="200"
                                PlaceholderText="Search..." TextChanged="AutoSuggestBox_TextChanged"
                                Height="32" />
                            </StackPanel>
                        </Flyout>
                    </Button.Flyout>
                </Button>
                <AutoSuggestBox x:Name="SearchBox"
                Visibility="Collapsed"
                QueryIcon="Find"
                PlaceholderText="Search..." TextChanged="AutoSuggestBox_TextChanged"
                Height="32"
                Margin="0,0,8,0" />

            </Grid>

            <Grid x:Name="SystemButtonsPlaceholder" Grid.Column="2" />
        </Grid>

        <Grid Margin="0,48,0,0">
            <SplitView x:Name="mainSplitView" 
           DisplayMode="Overlay" 
           IsPaneOpen="False" 
           CompactPaneLength="48" 
           OpenPaneLength="210"
           Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
                <SplitView.Pane>
                    <Grid Background="{ThemeResource LayerFillColorDefaultBrush}">
                        <Grid.Shadow>
                            <ThemeShadow />
                        </Grid.Shadow>
                        <Grid Translation="0,0,64">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Top Buttons -->
                            <Grid x:Name="mainStackPanel" 
                            Grid.Row="0"
                            Opacity="0"
                            Padding="4,2,4,0">
                                <Grid.RenderTransform>
                                    <TranslateTransform X="50"/>
                                </Grid.RenderTransform>

                                <Border x:Name="indicatorBorder"
                                Background="{ThemeResource SystemAccentColor}"
                                Width="3" HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Margin="0, 10, 0, 0"
                                Visibility="Collapsed"/>
                                
                                <StackPanel x:Name="NavigationButtonsStack">
                                    
                                    <Button x:Name="homeButton"
                                        Style="{StaticResource NavigationButtonStyle}"
                                        Click="HomeButton_Click">
                                        <StackPanel Orientation="Horizontal" Spacing="16">
                                            <FontIcon Glyph="&#xE80F;" FontSize="18"/>
                                            <TextBlock x:Name="HomepageText" Text="Homepage" VerticalAlignment="Center" FontSize="14"/>
                                        </StackPanel>
                                    </Button>

                                    <Button x:Name="favoritesButton" Margin="0,4,0,0"
                                        Style="{StaticResource NavigationButtonStyle}"
                                        Click="FavoritesButton_Click">
                                        <StackPanel Orientation="Horizontal" Spacing="16">
                                            <FontIcon Glyph="&#xE734;" FontSize="18"/>
                                            <TextBlock x:Name="FavoritesText" Text="Favorites" VerticalAlignment="Center" FontSize="14"/>
                                        </StackPanel>
                                    </Button>


                                    <Button x:Name="settingsButton" Margin="0,4,0,0"
                                        Style="{StaticResource NavigationButtonStyle}"
                                        Click="SettingsButton_Click">
                                        <StackPanel Orientation="Horizontal" Spacing="16">
                                            <FontIcon Glyph="&#xE713;" FontSize="18"/>
                                            <TextBlock x:Name="SettingsText" Text="Settings" VerticalAlignment="Center" FontSize="14"/>
                                        </StackPanel>
                                    </Button>
                                    
                                </StackPanel>
                            </Grid>

                            <!-- Bottom Exit Button -->
                            <Button x:Name="exitButton"
                            Grid.Row="1"
                            Click="ExitButton_Click"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Background="Transparent"
                            BorderThickness="0"
                            Padding="12,8"
                            Height="40"
                            Margin="4,4,4,12">
                                <StackPanel Orientation="Horizontal" Spacing="16">
                                    <FontIcon Glyph="&#xE7E8;" FontSize="18"/>
                                    <TextBlock x:Name="ExitText" Text="Exit" VerticalAlignment="Center" FontSize="14"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </Grid>
                </SplitView.Pane>

                <!--   Content  -->
                <SplitView.Content>
                    <Frame x:Name="contentFrame"/>
                </SplitView.Content>
            </SplitView>
        </Grid>
    </Grid>
</Window>
