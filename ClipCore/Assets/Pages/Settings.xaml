<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="ClipCore.Assets.Pages.Settings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,32">
            <TextBlock x:Name="SettingsTitle" 
                       Text="Settings" 
                       FontSize="28" 
                       FontWeight="Bold"/>
        </StackPanel>

        <!-- Settings Content -->
        <ScrollViewer Grid.Row="1">
            <StackPanel Spacing="24" MaxWidth="600" HorizontalAlignment="Left">

                <!-- Language Settings -->
                <StackPanel Spacing="12">
                    <TextBlock x:Name="LanguageSettingsTitle" 
                               Text="Language" 
                               FontSize="18" 
                               FontWeight="SemiBold"/>

                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16">
                        <StackPanel Spacing="12">
                            <TextBlock x:Name="SelectLanguageText" 
                                       Text="Select Language" 
                                       FontSize="14"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>

                            <ComboBox x:Name="LanguageComboBox"
                                      HorizontalAlignment="Stretch"
                                      SelectionChanged="LanguageComboBox_SelectionChanged">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <TextBlock Text="{Binding Flag}" FontSize="20"/>
                                            <TextBlock Text="{Binding Name}" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Startup Settings -->
                <StackPanel Spacing="12">
                    <TextBlock x:Name="StartupSettingsTitle" 
                               Text="Startup" 
                               FontSize="18" 
                               FontWeight="SemiBold"/>

                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16">
                        <ToggleSwitch x:Name="LaunchOnStartupToggle"
                                      Header="Launch on Windows startup"
                                      Toggled="LaunchOnStartupToggle_Toggled"/>
                    </Border>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>

        <!-- Save Button (Hidden by default, animates in) -->
        <Grid x:Name="SaveButtonContainer"
          Grid.Row="2"
          Visibility="Collapsed"
          Opacity="0"
          HorizontalAlignment="Right"
          VerticalAlignment="Bottom"
          Margin="0,0,0,0">

            <Button x:Name="SaveButton"
            Content="Save Changes"
            Style="{StaticResource AccentButtonStyle}"
            Padding="32,12"
            Click="SaveButton_Click">
                <Button.Shadow>
                    <ThemeShadow />
                </Button.Shadow>
            </Button>
        </Grid>

        <!-- Success Notification -->
        <Border x:Name="SuccessNotification"
                Grid.Row="0"
                Grid.RowSpan="3"
                Visibility="Collapsed"
                Background="{ThemeResource SystemFillColorSuccessBrush}"
                CornerRadius="8"
                Padding="16,12"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                Margin="0,80,0,0">
            <Border.Shadow>
                <ThemeShadow />
            </Border.Shadow>
            <StackPanel Orientation="Horizontal" Spacing="12">
                <FontIcon Glyph="&#xE73E;" 
                          FontSize="16"
                          Foreground="White"/>
                <TextBlock x:Name="SuccessText"
                           Text="Changes saved successfully!"
                           FontSize="14"
                           FontWeight="Medium"
                           Foreground="White"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>
